<section class="formulario m-top">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-6">
                <div class="formulario__content">
                    <h2 class="titulo titulo--mediano">Regístrate ahora mismo</h2>
                    <p>Para llegar a miles de compradores y vendedores con tu misma pasión.</p>
                    <span>Recuerda que al crear tu cuenta, aceptas los <a routerLink="/terminos">Términos de uso</a> y la <a routerLink="/privacidad">Política de privacidad</a> de Filatelia Peruana.</span>
                    <div class="formulario__content__form">
                        <form [formGroup]="registerForm" class="needs-validation row" (ngSubmit)="registrar()" >
                            <div class="form-group col-lg-12">
                                <label for="name">Nombre</label>
                                <input type="text" required id="name" formControlName="name" class="form-control" ngModel [ngClass]="{'is-valid':!name?.invalid&&(name?.dirty||name?.touched),'is-invalid':name?.invalid&&(name?.dirty||name?.touched)}" ngModel>
                                <div class="invalid-feedback" *ngIf="name?.invalid&&(name?.dirty||name?.touched)">
                                    <div *ngIf="name?.errors?.required">Nombre requerido</div>
                                    <div *ngIf="name?.errors?.minlength">Minímo es de 3 caracteres</div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <label for="email">Correo electrónico</label>
                                <input type="email" id="email" required formControlName="email" class="form-control" [ngClass]="{'is-valid':!email?.invalid&&(email?.dirty||email?.touched),'is-invalid':email?.invalid&&(email?.dirty||email?.touched)}" ngModel>
                                <div class="invalid-feedback" *ngIf="email?.invalid&&(email?.dirty||email?.touched)">
                                    <div *ngIf="email?.errors?.required">Correo requerido</div>
                                    <div *ngIf="email?.errors?.minlength; else message_correo" >Minímo es de 6 caracteres </div>
                                    <ng-template #message_correo>
                                        <div *ngIf="email?.errors?.pattern">Correo invalido</div>
                                    </ng-template>
                                </div>
                              </div>
                            <div class="form-group col-lg-12  has-validation">
                              <label for="exampleInputPassword1">Contraseña</label>
                              <input type="password" formControlName="password" required class="form-control" [ngClass]="{'is-valid':!password?.invalid&&(password?.dirty||password?.touched),'is-invalid':password?.invalid&&(password?.dirty||password?.touched)}" id="exampleInputPassword1" ngModel>
                              <div class="invalid-feedback" *ngIf="password?.invalid&&(password?.dirty||password?.touched)">
                                   <div *ngIf="password?.errors?.required">Contraseña requerido</div>
                                   <div *ngIf="password?.errors?.minlength">La contraseña mínima es de 6 caracteres </div>
                              </div>
                            </div>
                            <div class="form-group col-lg-12">
                              <label for="exampleCheck1">Confirmar contraseña</label>
                              <input type="password"  formControlName="password_confirm" required class="form-control" [ngClass]="{'is-valid':!password_confirm?.invalid&&(password_confirm?.dirty||password_confirm?.touched),'is-invalid':password_confirm?.invalid&&(password_confirm?.dirty||password_confirm?.touched)}" id="exampleInputPassword_conpassword_confirm1" ngModel>
                              <div class="invalid-feedback" *ngIf="password_confirm?.invalid&&(password_confirm?.dirty||password_confirm?.touched)">
                                   <div *ngIf="password_confirm?.errors?.required">Contraseña de confirmación requerido</div>
                                   <div *ngIf="password_confirm?.errors?.minlength">La contraseña mínima es de 6 caracteres </div>
                              </div>
                              <div class="invalid-feedback" *ngIf="registerForm.controls['password_confirm'].hasError('NoPassswordMatch')">
                                <div >Las contraseñas no coinciden </div>
                              </div>
                            </div>
                            <div class="col-lg-12">
                                <div *ngIf="response?.msg" class="text-center">
                                    <span [ngClass]="{'text-primary':response.ok,'text-danger':!response.ok}">
                                        {{response.msg}}
                                    </span>
                                </div>
                                
                                <button type="submit"  class="btn btn--negro" [disabled]="response.loading">
                                    {{(response.loading) ? 'Cargando.....' : 'Crear mi cuenta'}}
                                </button>
                            </div>
                            <div class="col-lg-12">
                                <span>¿Ya tienes cuenta? <a routerLink="/auth/login">Iniciar sesión</a> </span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 p-0">
                <div class="formulario__img" style="background-image: url(../assets/img/bg/bg-registrate.png);">
                    <div class="formulario__img__content formulario__img__content--botom">
                        <div>
                            <h2 class="titulo titulo--mediano">Llega a las personas indicadas en el momento indicado</h2>
                            <p>Comienza a comprar y vender hoy mismo tus colecciones en Filatelia Peruana</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
